package dev.eternal.client.module.impl.exploit;

import dev.eternal.client.event.Subscribe;;
import dev.eternal.client.event.events.EventPacket;
import dev.eternal.client.module.Module;
import dev.eternal.client.module.api.ModuleInfo;
import dev.eternal.client.module.impl.exploit.disabler.*;
import dev.eternal.client.property.impl.BooleanSetting;
import dev.eternal.client.property.impl.ModeSetting;
import lombok.Getter;
import net.minecraft.client.gui.GuiDownloadTerrain;
import net.minecraft.network.play.client.C0BPacketEntityAction;
import org.lwjgl.input.Keyboard;

@Getter
@ModuleInfo(name = "Disabler", description = "Disabled Anti-Cheats", category = Module.Category.EXPLOIT, defaultKey = Keyboard.KEY_L)
public class Disabler extends Module {

  public final ModeSetting modeSetting = new ModeSetting(this, "Mode",
      new HazelMCMode(this, "HazelMC"),
      new DesyncMode(this, "Teleport Desync"),
      new WatchdogMode(this, "Watchdog"),
      new AACv5Mode(this, "AAC v5"),
      new TransactionPollMode(this, "Transaction Poll"),
      new TransactionOffsetMode(this, "Transaction Offset"),
      new PulseMode(this, "Pulse Blink"),
      new KeepAlivePollMode(this, "KeepAlive Poll"),
      new VehicleMode(this, "Vehicle"));

  private final BooleanSetting cancelAction = new BooleanSetting(this, "Cancel C0B", true);

  @Subscribe
  public void handlePacket(EventPacket eventPacket) {
    if (mc.currentScreen instanceof GuiDownloadTerrain)
      mc.displayGuiScreen(null);
    if (eventPacket.getPacket() instanceof C0BPacketEntityAction && cancelAction.value()) {
      eventPacket.cancelled(true);
    }
  }

}
