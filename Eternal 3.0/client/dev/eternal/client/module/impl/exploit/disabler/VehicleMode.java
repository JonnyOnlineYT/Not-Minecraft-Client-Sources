package dev.eternal.client.module.impl.exploit.disabler;

import dev.eternal.client.event.Subscribe;;
import dev.eternal.client.event.events.EventPacket;
import dev.eternal.client.module.interfaces.IToggleable;
import dev.eternal.client.property.impl.NumberSetting;
import dev.eternal.client.property.impl.mode.Mode;
import dev.eternal.client.util.network.PacketUtil;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C0CPacketInput;

public class VehicleMode extends Mode {

  private final NumberSetting delaySetting = new NumberSetting(this, "Delay (Ticks)", 0, 0, 10, 1);

  private int currentTicks;

  public VehicleMode(IToggleable owner, String name) {
    super(owner, name);
  }

  @Subscribe
  public void handlePacket(EventPacket eventPacket) {
    if (eventPacket.getPacket() instanceof C03PacketPlayer) {
      if (currentTicks >= delaySetting.value()) {
        PacketUtil.sendSilent(new C0CPacketInput(.98F, .98F, false, true));
        currentTicks = 0;
      } else {
        currentTicks++;
      }
    }
  }

}
