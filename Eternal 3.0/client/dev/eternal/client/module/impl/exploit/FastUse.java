package dev.eternal.client.module.impl.exploit;

import dev.eternal.client.event.Subscribe;
import dev.eternal.client.event.events.EventUpdate;
import dev.eternal.client.module.Module;
import dev.eternal.client.module.api.ModuleInfo;
import dev.eternal.client.property.impl.NumberSetting;
import dev.eternal.client.util.network.PacketUtil;
import dev.eternal.client.util.time.Stopwatch;
import net.minecraft.item.Item;
import net.minecraft.item.ItemFood;
import net.minecraft.item.ItemPotion;
import net.minecraft.item.ItemSword;
import net.minecraft.network.play.client.C03PacketPlayer;

@ModuleInfo(name = "FastUse", category = Module.Category.EXPLOIT, description = "Uses consumables faster.")
public class FastUse extends Module {

  private final NumberSetting packets = new NumberSetting(this, "Amount of Packets", "amount of packet heeg", 5, 1, 100, 1);
  private final Stopwatch stopwatch = new Stopwatch();

  @Subscribe
  public void handleUpdate(EventUpdate eventUpdate) {
    if(!should() || !eventUpdate.pre())
      return;
    for (int i = 0; i < packets.value(); i++) {
      PacketUtil.sendSilent(new C03PacketPlayer());
    }
  }

  private boolean should() {
    if(mc.thePlayer.isUsingItem()) {
      Item item = mc.thePlayer.getHeldItem().getItem();
      if(item instanceof ItemPotion)
        return true;
      return item instanceof ItemFood;
    }
    return false;
  }

}
