package vestige.impl.module.exploit;

import org.lwjgl.input.Keyboard;

import net.minecraft.network.play.client.C03PacketPlayer.C04PacketPlayerPosition;
import net.minecraft.network.play.client.C03PacketPlayer.C06PacketPlayerPosLook;
import vestige.api.event.Listener;
import vestige.api.event.impl.MotionEvent;
import vestige.api.event.impl.MoveEvent;
import vestige.api.event.impl.UpdateEvent;
import vestige.api.module.Category;
import vestige.api.module.Module;
import vestige.api.module.ModuleInfo;
import vestige.api.setting.impl.ModeSetting;
import vestige.api.setting.impl.NumberSetting;
import vestige.util.network.PacketUtil;

@ModuleInfo(name = "Phase", category = Category.EXPLOIT, key = Keyboard.KEY_K)
public class Phase extends Module {
	
	private final ModeSetting mode = new ModeSetting("Mode", this, "VClip", "VClip", "Redesky");
	
	private final NumberSetting vclipPos = new NumberSetting("VClip Pos", this, -3, -9, 9, -1, true) {
		@Override
		public boolean isShown() {
			return mode.is("VClip");
		}
	};
	
	public Phase() {
		this.registerSettings(mode, vclipPos);
	}
	
	public void onEnable() {
		switch (mode.getMode()) {
			case "VClip":
				mc.thePlayer.setPosition(mc.thePlayer.posX, mc.thePlayer.posY + vclipPos.getCurrentValue(), mc.thePlayer.posZ);
				this.setEnabled(false);
				return;
		}
	}
	
	@Listener
	public void onUpdate(UpdateEvent event) {
		
	}
	
	@Listener
	public void onMotion(MotionEvent event) {
		switch (mode.getMode()) {
		case "Redesky":
			PacketUtil.sendPacketNoEvent(new C06PacketPlayerPosLook(mc.thePlayer.posX, mc.thePlayer.posY - 1E-8D, mc.thePlayer.posZ, mc.thePlayer.rotationYaw, mc.thePlayer.rotationPitch, false));
			PacketUtil.sendPacketNoEvent(new C06PacketPlayerPosLook(mc.thePlayer.posX, mc.thePlayer.posY - 1.0D, mc.thePlayer.posZ, mc.thePlayer.rotationYaw, mc.thePlayer.rotationPitch, false));
			break;
	}
	}
	
	@Listener
	public void onMove(MoveEvent event) {
		switch (mode.getMode()) {
			case "Redesky":
				mc.thePlayer.noClip = true;
				break;
		}
	}
	
}
